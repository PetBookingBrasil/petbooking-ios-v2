//
//  SignupPresenter.swift
//  petbooking-ios-v2
//
//  Created Ryniere S Silva on 29/04/17.
//  Copyright © 2017 Pet Booking Serviços e Desenvolvimento de Softwares SA. All rights reserved.
//
//  Template generated by Juanpe Catalán @JuanpeCMiOS
//

import UIKit
import ALLoadingView

class SignupPresenter: SignupPresenterProtocol {
	
	weak private var view: SignupViewProtocol?
    
	private let interactor: SignupInteractorProtocol
	private let router: SignupWireframeProtocol
	
	init(interface: SignupViewProtocol, interactor: SignupInteractorProtocol, router: SignupWireframeProtocol) {
		self.view = interface
		self.interactor = interactor
		self.router = router
		
		self.interactor.presenter = self
	}
	
	func fillFields() {
		interactor.fillFields()
	}
    
    func setProfileImageView(withUrlString urlString: String) {
		ALLoadingView.manager.hideLoadingView()
        
		view?.setProfileImageView(withUrlString: urlString)
	}
	
    func setName(_ name: String) {
		view?.setName(name)
	}
	
    func setEmail(_ email: String) {
		view?.setEmail(email)
	}
    
    func setMobile(_ mobile: String) {
		view?.setMobile(mobile)
	}
	
    func createUser(name: String, email: String, mobile: String, password: String, avatar: String?) {
		ALLoadingView.manager.showLoadingView(ofType: .basic, windowMode: .fullscreen)
		interactor.createUser(name: name, email: email, mobile: mobile, password: password, avatar: avatar)
	}
	
	func createUserWithSuccess() {
        ALLoadingView.manager.hideLoadingView(withDelay: 1) {
            self.router.createUserWithSuccess()
        }
	}
	
	func updatedUserWithSuccess() {
		ALLoadingView.manager.hideLoadingView()
		router.updatedUserWithSuccess()
	}
	
	func createUserWithError() {
		ALLoadingView.manager.hideLoadingView()
	}
}
